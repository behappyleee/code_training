<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Understanding JavaScript's Capture</title>
  <link rel="icon" href="https://fav.farm/ğŸ”¥" />
</head>
<body class="bod">

  <div class="one">
    <div class="two">
      <div class="three">
      </div>
    </div>
  </div>

<style>
  html {
    box-sizing: border-box;
  }

  *, *:before, *:after {
    box-sizing: inherit;
  }

  div {
    width: 100%;
    padding: 100px;
  }

  .one {
    background: thistle;
  }

  .two {
    background: mistyrose;
  }

  .three {
    background: coral;
  }
</style>

<button></button>
<script>
  // Understanding JavaScript Capture !
  const oneSelector = document.querySelector('.one');
  const twoSelector = document.querySelector('.two');
  const threeSelector = document.querySelector('.three');
  
  const divSelector = document.querySelectorAll('div');
  const buttonSelector = document.querySelector('button');

  function showOne() {
    alert('test !!')
  }

  function showTwo() {
    alert('test 2 !!');
  }

  function showThree() {
    alert('test 3 !!');
  }

  function clickButton() {
    alert('click button !');
  }

  function logText(e) {

    // e.stopPropagation(); // event bubbling ì„ ë§‰ìœ¼ë ¤ë©´ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì•„ë˜ capture, once option ì„ ì‚¬ìš©

    console.log('LOG TEXT E TARGET 1 : ' + this.classList);
    console.log('LOG TEXT E TARGET 2 : ' + this.classList.value);
  }

  oneSelector.addEventListener('click', showOne, {once: true});   // í•´ë‹¹ ì˜µì…˜ì„ ì„¤ì • íˆ í•œë²ˆë§Œ ì‹¤í–‰ì´ ë¨
  twoSelector.addEventListener('click', showTwo);
  threeSelector.addEventListener('click', showThree);

  // capture ì˜µì…˜ì€ ë²„ë¸”ë§ì„ ë°©ì§€ ì‹œì¼œ ì¤Œ
  // bubbling - í•œ ìš”ì†Œì— ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì´ ìš”ì†Œì— í• ë‹¹ ëœ í•¸ë“¤ëŸ¬ê°€ ë™ì‘ í•˜ê³  ì´ì–´ì„œ ë¶€ëª¨ ìš”ì†Œì˜ í•¸ë“¤ëŸ¬ê°€ ë™ì‘
  // ê°€ì¥ ìµœìƒë‹¨ì˜ ì¡°ìƒ ìš”ì†Œë¥¼ ë§Œë‚  ë•Œê¹Œì§€ ì´ ê³¼ì •ì´ ë°˜ë³µë˜ë©´ì„œ ìš”ì†Œ ê°ê°ì— í• ë‹¹ëœ í•¸ë“¤ëŸ¬ê°€ ë™ì‘ í•¨.
  
  // ë²„ë¸”ë§ ì¤‘ë‹¨ ë°©ì‹ì€ ì´ë²¤íŠ¸ ê°ì²´ ë©”ì„œë“œì¸ event.stopPropagation() ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•¨

  divSelector.forEach((item) => {
    // item.addEventListener('click', logText); // e.stopPropagation(); ì„ ì‚¬ìš©ì‹œ ì˜µì…˜ ì—†ì´ ê·¸ëƒ¥ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì—¬ ë„ ë¨
    item.addEventListener('click', logText, {
      capture: false,
      once: true
    });
  })

  buttonSelector.addEventListener('click', clickButton);

</script>
</body>
</html>
